// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../../../../../../node_modules/@prisma/client/accounts"
}

datasource db {
  provider = "postgresql"
  url      = env("MICROSERVICE_ACCOUNTS_DB_URL")
}

enum AccountStatus {
  ACTIVE
  INACTIVE
  CANCELED
  BLOCKED
}

enum AccountRole {
  USER
  ADMIN
}

model Account {
  id                 String        @id @default(cuid())
  firstname          String        @db.VarChar(100)
  lastname           String        @db.VarChar(100)
  parent             String?       @db.VarChar(255)
  email              String        @db.VarChar(255)
  username           String        @unique @db.VarChar(255)
  password           String        @db.VarChar(255)
  lastPassword       String?       @map("last_password") @db.VarChar(255)
  salt               String        @unique @db.VarChar(255)
  avatar             String?       @db.VarChar(255)
  forgotPasswordCode String?       @map("forgot_password_code") @db.VarChar(255)
  dateBirthday       DateTime?     @map("date_birthday")
  status             AccountStatus
  canceledAt         DateTime?     @map("canceled_at")
  updatedAt          DateTime?     @updatedAt @map("updated_at")
  createdAt          DateTime?     @default(now()) @map("created_at")
  roles              AccountRole[]

  @@map("accounts")
}

model Access {
  id         String    @id @default(cuid())
  accountId  String    @map("account_id") @db.VarChar(255)
  active     Boolean   @default(true)
  expiresIn  DateTime  @map("expires_in")
  canceledAt DateTime? @map("canceled_at")
  updatedAt  DateTime? @map("updated_at")
  createdAt  DateTime? @default(now()) @map("created_at")

  @@map("accesses")
}
