import { EventPublisher } from '@nestjs/cqrs';
import { Test } from '@nestjs/testing';
import { Remove<%= props.table.pascalCaseSingularName %>CommandHandler } from '.';

describe('Remove<%= props.table.pascalCaseSingularName %>CommandHandler', () => {
  let remove<%= props.table.pascalCaseSingularName %>CommandHandler: Remove<%= props.table.pascalCaseSingularName %>CommandHandler;

  beforeEach(async () => {
    const moduleRef = await Test.createTestingModule({
      controllers: [],
      providers: [
        Remove<%= props.table.pascalCaseSingularName %>CommandHandler,
        {
          provide: EventPublisher,
          useFactory: () => ({
            mergeObjectContext: jest.fn().mockImplementation(() => ({
              changedPassword: jest.fn(),
              commit: jest.fn()
            }))
          })
        }
      ]
    }).compile();

    remove<%= props.table.pascalCaseSingularName %>CommandHandler = moduleRef.get(Remove<%= props.table.pascalCaseSingularName %>CommandHandler);
  });
  afterEach(() => {
    jest.clearAllMocks();
  });

  it('should be defined', () => {
    expect(remove<%= props.table.pascalCaseSingularName %>CommandHandler).toBeDefined();
  });
});
